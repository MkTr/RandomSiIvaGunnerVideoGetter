<!DOCTYPE html>
<html>
<body>

  <div id="page-wrapper">

        <div>
            Copy the list of rips from <a href="http://siivagunner.wikia.com/wiki/List_of_SiIvaGunner_Uploads">the wikia page</a>, save them in a text file and open it here:
            <input type="file" id="fileInput">
        </div>
		<p id="FitnessGramPacerTest" style="display:none;">	<button id="RandomButton" onClick="FindRandomRip()">Random Rip</button><br>
		<input type="text" id="SearchRipInputBox">		<button id="SearchRipButton" onClick="SearchForRip(SearchRipInputBox.value)">Search Rip</button><p><br>
        <p id="RipsDisplayArea"><p>

    </div>
<script>
var RipCount = 0;
var RipsList;

window.onload = function() {
        var fileInput = document.getElementById('fileInput');
        var RipsDisplayArea = document.getElementById('RipsDisplayArea');

        fileInput.addEventListener('change', function(e) {
            var file = fileInput.files[0];
            var textType = /text.*/;

            if (file.type.match(textType)) {
                var reader = new FileReader();

                reader.onload = function(e) {
                    RipsDisplayArea.innerText = reader.result;
					document.getElementById("fileInput").style.display="none";
					
					RipCount = ProcessRips();
					RipsDisplayArea.innerText = RipsDisplayArea.innerText + "\n\n" + RipCount + " rips. Wew.";
					document.getElementById("FitnessGramPacerTest").style.display="block";
                }

                reader.readAsText(file);    
            } else {
                RipsDisplayArea.innerText = "Do I look like I know what a jay peg is, I just want a txt of a list of SiIvaGunner rips";
            }
        });
}

function ProcessRips(){
		RipsList = RipsDisplayArea.innerText.split(/\r\n|\r|\n/);
		var ListSize = RipsList.length;
		var pos;
		RipsDisplayArea.innerText = '';
		
		for(pos = 0; pos < ListSize; ++pos)
		{
			if(RipsList[pos] == 0) {
				RipsList.splice(pos,1);
				--pos;
				--ListSize
			}
		}
		
		RipsDisplayArea.innerText = RipsList.join('\n');
		return ListSize;
}

function FindRandomRip(){
		var randomRip = Math.floor(Math.random() * RipCount);
/*		var textPosition = 0;
		var areWeThereYet;
		for(areWeThereYet = 0; areWeThereYet < randomRip; ++areWeThereYet)
		{
			textPosition = RipsDisplayArea.innerText.indexOf("\n",textPosition+1);
		}
		var rip = RipsDisplayArea.innerText.substring(textPosition, RipsDisplayArea.innerText.indexOf("\n",textPosition+1) );

//		var fontSize = parseInt( window.getComputedStyle(document.getElementById("RipsDisplayArea")).fontSize ) +2;*/
//		window.scrollTo(0,(fontSize * randomRip));

		document.getElementById("SearchRipInputBox").value = RipsList[randomRip];
}

function SearchForRip(theRip){
		var linkToSiIva = "https://www.youtube.com/channel/UC9ecwl3FTG66jIKA9JRDtmg/search?query=" + theRip;
		linkToSiIva = linkToSiIva.replace(/ /g, '%20');
		linkToSiIva = linkToSiIva.replace(/"/g, '%20');
		window.open(linkToSiIva);
}


</script>

</body>
</html> 
